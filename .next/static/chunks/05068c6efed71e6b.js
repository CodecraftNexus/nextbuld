(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20383,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(18566),l=e.i(70319),r=e.i(41053),i=e.i(75254);let n=(0,i.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var d=e.i(92270),c=e.i(31278),o=e.i(98919),x=e.i(48256);let m=(0,i.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),h=(0,i.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var p=e.i(57688);let g=(0,i.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var y=e.i(55436);let u=(0,i.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),j=(0,i.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var b=e.i(86536),N=e.i(89630),f=e.i(94025),v=e.i(41286);let w=e=>{if(!e)return null;let a=e=>e?e.split(",").map(e=>e.trim()):[];return{lagnaya:e.lagnaya,box1:a(e.box1),box2:a(e.box2),box3:a(e.box3),box4:a(e.box4),box5:a(e.box5),box6:a(e.box6),box7:a(e.box7),box8:a(e.box8),box9:a(e.box9),box10:a(e.box10),box11:a(e.box11),box12:a(e.box12)}};function k(){let[e,t]=(0,s.useState)([]),[i,d]=(0,s.useState)(!1),[o,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(""),[k,P]=(0,s.useState)(1),[A,S]=(0,s.useState)(0),[I,C]=(0,s.useState)(0),[D,L]=(0,s.useState)(null),[M,K]=(0,s.useState)(new Set);(0,s.useEffect)(()=>{F()},[k]);let F=async()=>{try{d(!0);let e=await r.adminService.getAllUsers(k,10,m);e.success&&(t(e.data.users),C(e.data.pagination.total),S(e.data.pagination.totalPages))}catch(e){l.toast.error("Failed to fetch users")}finally{d(!1)}},q=()=>{P(1),F()},E=async()=>{try{x(!0),await r.adminService.exportAllData(),l.toast.success("Data exported successfully!")}catch(e){l.toast.error("Failed to export data")}finally{x(!1)}},U=async e=>{try{let a=await r.adminService.getUserCompleteData(e.toString());a.success?L(a):l.toast.error("Failed to load complete user data")}catch(e){l.toast.error("Failed to fetch user details")}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total Users"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:I})]}),(0,a.jsx)(n,{className:"w-12 h-12 text-indigo-600"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Current Page"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:k})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-indigo-600 font-bold",children:A})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsx)("button",{onClick:E,disabled:o,className:"w-full flex items-center justify-center space-x-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Loader2,{className:"w-5 h-5 animate-spin"}),(0,a.jsx)("span",{children:"Exporting..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Export All Data"})]})})})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(y.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",value:m,onChange:e=>h(e.target.value),onKeyPress:e=>"Enter"===e.key&&q(),placeholder:"Search by name, email, or username...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),(0,a.jsx)("button",{onClick:q,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Search"})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Username"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gender"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sub Users"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:i?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center",children:(0,a.jsx)(c.Loader2,{className:"w-8 h-8 animate-spin text-indigo-600 mx-auto"})})}):0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No users found"})}):e.map(e=>(0,a.jsxs)(s.Fragment,{children:[(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.id}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:e.name}),e.subUsers?.length>0&&(0,a.jsx)("button",{onClick:()=>{var a;let s;return a=e.id,void((s=new Set(M)).has(a)?s.delete(a):s.add(a),K(s))},className:"text-indigo-600 hover:text-indigo-900",children:(0,a.jsx)("svg",{className:`w-4 h-4 transition-transform ${M.has(e.id)?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.email}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.username}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.gender?.type||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.subUsers?.length||0}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("button",{onClick:()=>U(e.id),className:"text-indigo-600 hover:text-indigo-900",children:(0,a.jsx)(b.Eye,{className:"w-5 h-5"})})})]}),M.has(e.id)&&e.subUsers?.map(e=>(0,a.jsxs)("tr",{className:"bg-gray-50 hover:bg-gray-100",children:[(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 pl-12",children:["↳ ",e.id]}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.email}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.username}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:e.gender?.type||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:"0"}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("button",{onClick:()=>U(e.id),className:"text-indigo-600 hover:text-indigo-900",children:(0,a.jsx)(b.Eye,{className:"w-5 h-5"})})})]},`sub-${e.id}`))]},e.id))})]})}),A>1&&(0,a.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between border-t",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Page ",(0,a.jsx)("span",{className:"font-medium",children:k})," of"," ",(0,a.jsx)("span",{className:"font-medium",children:A})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>P(e=>Math.max(1,e-1)),disabled:1===k,className:"px-3 py-2 border rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(u,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>P(e=>Math.min(A,e+1)),disabled:k===A,className:"px-3 py-2 border rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(j,{className:"w-5 h-5"})})]})]})]}),D&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 z-50 overflow-y-auto flex items-start justify-center pt-0",children:(0,a.jsxs)("div",{className:"bg-white w-full min-h-screen relative max-w-none mx-0",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white px-6 py-4 border-b flex items-center justify-between z-10",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900",children:["User Details: ",D.data.personalInfo?.name||"Unknown"]}),(0,a.jsx)("button",{onClick:()=>L(null),className:"text-gray-500 hover:text-gray-700 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"p-6",children:[D.data.personalInfo&&(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 border-b pb-2",children:"Personal Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Name:"})," ",(0,a.jsx)("span",{className:"text-gray-900",children:D.data.personalInfo.name||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Email:"})," ",(0,a.jsx)("span",{className:"text-gray-900",children:D.data.personalInfo.email||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Username:"})," ",(0,a.jsx)("span",{className:"text-gray-900",children:D.data.personalInfo.username||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Nickname:"})," ",(0,a.jsx)("span",{className:"text-gray-900",children:D.data.personalInfo.nikname||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Date of Birth:"})," ",(0,a.jsx)("span",{className:"text-gray-900",children:D.data.personalInfo.dateOfBirth||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Birth Time:"})," ",(0,a.jsx)("span",{className:"text-gray-900",children:D.data.personalInfo.birthTime||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"WhatsApp:"})," ",(0,a.jsx)("span",{className:"text-gray-900",children:D.data.personalInfo.WhatsappNumber||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Gender:"})," ",(0,a.jsx)("span",{className:"text-gray-900",children:D.data.personalInfo.gender?.type||"N/A"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Birth Location:"})," ",(0,a.jsx)("span",{className:"text-gray-900",children:D.data.personalInfo.birthLocation?.name||"N/A"})]})]})]}),D.data.profileImages?.length>0&&(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 border-b pb-2",children:"Profile Images"}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:D.data.profileImages.map(e=>(0,a.jsx)(p.default,{src:e.imagePath,alt:"Profile",width:200,height:200,className:"rounded-lg shadow"},e.id))})]}),D.data.astrologicalData&&(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 border-b pb-2",children:"Astrological Data"}),(0,a.jsxs)("div",{className:"space-y-6",children:[D.data.astrologicalData.planetHouse&&(0,a.jsx)(N.default,{data:w(D.data.astrologicalData.planetHouse),lagnaya:D.data.astrologicalData.planetHouse.lagnaya,isHoroscope:!0}),D.data.astrologicalData.navamsaka&&(0,a.jsx)(N.default,{data:w(D.data.astrologicalData.navamsaka),lagnaya:D.data.astrologicalData.navamsaka.lagnaya,isHoroscope:!1}),D.data.astrologicalData.current_mahadasha_set&&(0,a.jsx)(f.default,{items:D.data.astrologicalData.current_mahadasha_set,ismahaDaha:!0}),D.data.astrologicalData.current_antardasha_set&&(0,a.jsx)(f.default,{items:D.data.astrologicalData.current_antardasha_set,ismahaDaha:!1}),D.data.astrologicalData.astrologicalDetails&&(0,a.jsx)(v.default,{astroData:D.data.astrologicalData.astrologicalDetails}),!D.data.astrologicalData.planetHouse&&!D.data.astrologicalData.navamsaka&&!D.data.astrologicalData.current_mahadasha_set&&!D.data.astrologicalData.current_antardasha_set&&!D.data.astrologicalData.astrologicalDetails&&(0,a.jsx)("p",{className:"text-gray-500",children:"No astrological data available."})]})]}),D.data.predictions?.length>0&&(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 border-b pb-2",children:"Predictions"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full bg-white border border-gray-200 rounded-lg",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700",children:"Planet"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700",children:"General Prediction"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700",children:"Personalised Prediction"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700",children:"Planet Zodiac Prediction"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700",children:"Verbal Location"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:D.data.predictions.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.planet?.PlanetName||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.general_prediction||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.personalised_prediction||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.planet_zodiac_prediction||"N/A"}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.verbal_location||"N/A"})]},e.id))})]})})]}),D.data.employment?.length>0&&(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 border-b pb-2",children:"Employment"}),(0,a.jsx)("ul",{className:"space-y-2",children:D.data.employment.map(e=>(0,a.jsxs)("li",{className:"text-gray-700",children:["• ",e.jobName||"N/A"," (",e.category||"N/A",")"]},e.id))})]}),D.data.education?.length>0&&(0,a.jsxs)("section",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 border-b pb-2",children:"Education"}),(0,a.jsx)("ul",{className:"space-y-2",children:D.data.education.map(e=>(0,a.jsxs)("li",{className:"text-gray-700",children:["• ",e.qualificationName||"N/A"," (",e.category||"N/A",")"]},e.id))})]})]}),(0,a.jsx)("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>L(null),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})]})}var P=e.i(7233);let A=(0,i.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),S=(0,i.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var I=e.i(37727),C=e.i(56909);let D=(0,i.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);function L(){let[e,t]=(0,s.useState)([]),[i,n]=(0,s.useState)(!1),[d,o]=(0,s.useState)(!1),[x,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null),[g,u]=(0,s.useState)(""),[j,b]=(0,s.useState)(""),[N,f]=(0,s.useState)(""),[v,w]=(0,s.useState)({lagnaya:"",PredictionPlanetId:"",planetlocation:"",prediction:""}),k=["Mesha","Vrushabha","Mithuna","Kataka","Singha","Kanya","Thula","Vrushchika","Dhanu","Makara","Kumbha","Meena"],L=[{id:1,name:"Sun"},{id:2,name:"Moon"},{id:3,name:"Mars"},{id:4,name:"Mercury"},{id:5,name:"Jupiter"},{id:6,name:"Venus"},{id:7,name:"Saturn"},{id:8,name:"Rahu"},{id:9,name:"Ketu"}],M=Array.from({length:12},(e,a)=>(a+1).toString());(0,s.useEffect)(()=>{K()},[]);let K=async()=>{try{n(!0);let e={};g&&(e.lagnaya=g),j&&(e.planetId=parseInt(j)),N&&(e.planetlocation=N);let a=await r.adminService.getAllPlanetPredictions(e);a.success?t(a.data.data||[]):l.toast.error("Failed to fetch predictions")}catch(e){l.toast.error("Error fetching predictions")}finally{n(!1)}},F=async e=>{if(e.preventDefault(),!v.lagnaya||!v.PredictionPlanetId||!v.planetlocation||!v.prediction)return void l.toast.error("All fields are required");try{let e;n(!0);let a={...v,PredictionPlanetId:"string"==typeof v.PredictionPlanetId?parseInt(v.PredictionPlanetId):v.PredictionPlanetId};x&&h?(e=await r.adminService.updatePlanetPrediction(h,a),l.toast.success("Prediction updated successfully!")):(e=await r.adminService.createPlanetPrediction(a),l.toast.success("Prediction created successfully!")),e.success?(o(!1),E(),K()):l.toast.error(e.error||"Operation failed")}catch(e){l.toast.error(e.message||"Operation failed")}finally{n(!1)}},q=async e=>{if(confirm("Are you sure you want to delete this prediction?"))try{n(!0);let a=await r.adminService.deletePlanetPrediction(e);a.success?(l.toast.success("Prediction deleted successfully!"),K()):l.toast.error(a.error||"Delete failed")}catch(e){l.toast.error(e.message||"Delete failed")}finally{n(!1)}},E=()=>{w({lagnaya:"",PredictionPlanetId:"",planetlocation:"",prediction:""}),m(!1),p(null)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Planet Predictions"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage predictions for different planets, lagnayas, and locations"})]}),(0,a.jsxs)("button",{onClick:()=>{E(),o(!0)},className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:[(0,a.jsx)(P.Plus,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Add Prediction"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(D,{className:"w-5 h-5 text-gray-500"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("select",{value:g,onChange:e=>u(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"",children:"All Lagnayas"}),k.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:j,onChange:e=>b(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"",children:"All Planets"}),L.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsxs)("select",{value:N,onChange:e=>f(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"",children:"All Locations"}),M.map(e=>(0,a.jsxs)("option",{value:e,children:["Location ",e]},e))]}),(0,a.jsxs)("button",{onClick:K,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition flex items-center justify-center space-x-2",children:[(0,a.jsx)(y.Search,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Apply Filters"})]})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Lagnaya"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Planet"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Location"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prediction"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:i?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center",children:(0,a.jsx)(c.Loader2,{className:"w-8 h-8 animate-spin text-indigo-600 mx-auto"})})}):0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:"No predictions found"})}):e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.id}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.lagnaya}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.predictionPlanet?.PlanetName||`Planet ${e.PredictionPlanetId}`}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.planetlocation}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600 max-w-xs truncate",children:e.prediction}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>{m(!0),p(e.id),w({lagnaya:e.lagnaya,PredictionPlanetId:e.PredictionPlanetId,planetlocation:e.planetlocation,prediction:e.prediction}),o(!0)},className:"text-indigo-600 hover:text-indigo-900",children:(0,a.jsx)(A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>q(e.id),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(S,{className:"w-5 h-5"})})]})})]},e.id))})]})})}),d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white px-6 py-4 border-b flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:x?"Edit Prediction":"Create New Prediction"}),(0,a.jsx)("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(I.X,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:F,className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lagnaya *"}),(0,a.jsxs)("select",{value:v.lagnaya,onChange:e=>w({...v,lagnaya:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Lagnaya"}),k.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Planet *"}),(0,a.jsxs)("select",{value:v.PredictionPlanetId,onChange:e=>w({...v,PredictionPlanetId:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Planet"}),L.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Planet Location *"}),(0,a.jsxs)("select",{value:v.planetlocation,onChange:e=>w({...v,planetlocation:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Location"}),M.map(e=>(0,a.jsxs)("option",{value:e,children:["Location ",e]},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prediction Text *"}),(0,a.jsx)("textarea",{value:v.prediction,onChange:e=>w({...v,prediction:e.target.value}),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Enter detailed prediction...",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>o(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"flex items-center space-x-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Loader2,{className:"w-5 h-5 animate-spin"}),(0,a.jsx)("span",{children:"Saving..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Save,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:x?"Update":"Create"})]})})]})]})]})})]})}let M=(0,i.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var K=e.i(43531);function F(){let[e,t]=(0,s.useState)(!1),[i,n]=(0,s.useState)(!1),[d,o]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),[p,g]=(0,s.useState)(""),[y,u]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),[w,k]=(0,s.useState)(null),[S,D]=(0,s.useState)(!1),[L,F]=(0,s.useState)(!1),q=async e=>{if(e.preventDefault(),!p.trim())return void l.toast.error("API key is required");try{t(!0);let e=await r.adminService.createApiKey(p);e.success?(l.toast.success("API key created successfully!"),n(!1),g("")):l.toast.error(e.error||"Failed to create API key")}catch(e){l.toast.error(e.message||"Failed to create API key")}finally{t(!1)}},E=async e=>{if(e.preventDefault(),!y.trim()||!j.trim())return void l.toast.error("Both API key ID and new key value are required");try{t(!0);let e=await r.adminService.updateApiKey(j,y);e.success?(l.toast.success("API key updated successfully!"),o(!1),u(""),N("")):l.toast.error(e.error||"Failed to update API key")}catch(e){l.toast.error(e.message||"Failed to update API key")}finally{t(!1)}},U=async e=>{if(e.preventDefault(),!f.trim())return void l.toast.error("API key ID is required");try{t(!0);let e=await r.adminService.getApiKey(f);e.success&&e.data.ApiKey?(k(e.data.ApiKey),h(!0),v("")):l.toast.error(e.error||"API key not found")}catch(e){l.toast.error(e.message||"Failed to fetch API key")}finally{t(!1)}},_=e=>{navigator.clipboard.writeText(e),F(!0),l.toast.success("Copied to clipboard!"),setTimeout(()=>F(!1),2e3)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"API Keys Management"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage API keys for external integrations"})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,a.jsx)(P.Plus,{className:"w-6 h-6 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Create API Key"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Add new API key"})]})]})}),(0,a.jsx)("button",{onClick:()=>n(!0),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:"Create New Key"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,a.jsx)(b.Eye,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"View API Key"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"View masked key"})]})]})}),(0,a.jsxs)("form",{onSubmit:U,className:"space-y-2",children:[(0,a.jsx)("input",{type:"text",value:f,onChange:e=>v(e.target.value),placeholder:"Enter API Key ID",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,a.jsx)("button",{type:"submit",disabled:e,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:e?(0,a.jsx)(c.Loader2,{className:"w-5 h-5 animate-spin mx-auto"}):"View Key"})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"p-3 bg-indigo-100 rounded-lg",children:(0,a.jsx)(A,{className:"w-6 h-6 text-indigo-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Update API Key"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Modify existing key"})]})]})}),(0,a.jsx)("button",{onClick:()=>o(!0),className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition",children:"Update Key"})]})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(m,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-900",children:"About API Keys"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"API keys are used for authenticating external services. When viewing a key, you'll see a masked version (first 8 characters + ... + last 4 characters) for security purposes. Only admins can create and update keys."})]})]})}),i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Create New API Key"}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(I.X,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:q,className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key *"}),(0,a.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),placeholder:"sk-1234567890abcdef...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500",required:!0}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the full API key value"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>n(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:e,className:"flex items-center space-x-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition disabled:opacity-50",children:e?(0,a.jsx)(c.Loader2,{className:"w-5 h-5 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Save,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Create"})]})})]})]})]})}),d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Update API Key"}),(0,a.jsx)("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(I.X,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:E,className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key ID *"}),(0,a.jsx)("input",{type:"text",value:y,onChange:e=>u(e.target.value),placeholder:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New API Key Value *"}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>N(e.target.value),placeholder:"sk-newkey1234567890...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",required:!0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>o(!1),className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:e,className:"flex items-center space-x-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition disabled:opacity-50",children:e?(0,a.jsx)(c.Loader2,{className:"w-5 h-5 animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Save,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Update"})]})})]})]})]})}),x&&w&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"API Key Details"}),(0,a.jsx)("button",{onClick:()=>{h(!1),k(null),D(!1)},className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)(I.X,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Key ID"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:w.id,readOnly:!0,className:"flex-1 px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg"}),(0,a.jsx)("button",{onClick:()=>_(w.id),className:"p-2 text-gray-600 hover:text-gray-900",children:L?(0,a.jsx)(K.Check,{className:"w-5 h-5 text-green-600"}):(0,a.jsx)(M,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key (Masked)"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"text",value:w.key,readOnly:!0,className:"flex-1 px-4 py-2 bg-gray-50 border border-gray-300 rounded-lg font-mono text-sm"}),(0,a.jsx)("button",{onClick:()=>_(w.key),className:"p-2 text-gray-600 hover:text-gray-900",children:L?(0,a.jsx)(K.Check,{className:"w-5 h-5 text-green-600"}):(0,a.jsx)(M,{className:"w-5 h-5"})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"First 8 characters + ... + Last 4 characters"})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,a.jsx)("strong",{children:"Security Note:"})," For security reasons, only a masked version of the key is displayed. Store the full key securely."]})}),(0,a.jsx)("div",{className:"flex justify-end pt-4",children:(0,a.jsx)("button",{onClick:()=>{h(!1),k(null),D(!1)},className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Close"})})]})]})})]})}let q=(0,i.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);function E(){let[e,t]=(0,s.useState)({dailyIncome:0,monthlyIncome:0,yearlyIncome:0}),[i,n]=(0,s.useState)(!0);(0,s.useEffect)(()=>{d()},[]);let d=async()=>{try{n(!0);let e=await r.adminService.getIncomeAnalytics();e.success?t(e.analytics):l.toast.error("Failed to load analytics")}catch(e){l.toast.error("Failed to load analytics")}finally{n(!1)}};return i?(0,a.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)(h,{className:"w-6 h-6 text-green-500"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Daily Income"})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["LKR ",e.dailyIncome.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)(h,{className:"w-6 h-6 text-blue-500"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Monthly Income"})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["LKR ",e.monthlyIncome.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,a.jsx)(q,{className:"w-6 h-6 text-purple-500"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"Yearly Income"})]}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:["LKR ",e.yearlyIncome.toFixed(2)]})]})]})}function U(){let e=(0,t.useRouter)(),[i,p]=(0,s.useState)(null),[g,y]=(0,s.useState)(!0),[u,j]=(0,s.useState)("users");(0,s.useEffect)(()=>{b()},[]);let b=async()=>{try{let a=await r.adminService.getProfile();a.success?p(a.admin):e.push("/admin")}catch(a){e.push("/admin")}finally{y(!1)}},N=async()=>{try{await r.adminService.logout(),l.toast.info("Logged out successfully"),e.push("/admin")}catch(e){l.toast.error("Logout failed")}};if(g&&!i)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(c.Loader2,{className:"w-8 h-8 animate-spin text-indigo-600"})});let f=[{id:"users",label:"User Management",icon:n},{id:"predictions",label:"Planet Predictions",icon:x.Globe},{id:"apikeys",label:"API Keys",icon:m},{id:"analytics",label:"Income Analytics",icon:h}];return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(o.Shield,{className:"w-8 h-8 text-indigo-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Welcome, ",i?.name]})]})]}),(0,a.jsxs)("button",{onClick:N,className:"flex items-center space-x-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition",children:[(0,a.jsx)(d.LogOut,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Logout"})]})]})})}),(0,a.jsx)("div",{className:"bg-white border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("nav",{className:"flex space-x-8","aria-label":"Tabs",children:f.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>j(e.id),className:`
                    flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition
                    ${u===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                  `,children:[(0,a.jsx)(s,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:e.label})]},e.id)})})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["users"===u&&(0,a.jsx)(k,{}),"predictions"===u&&(0,a.jsx)(L,{}),"apikeys"===u&&(0,a.jsx)(F,{}),"analytics"===u&&(0,a.jsx)(E,{})]})]})}e.s(["default",()=>U],20383)}]);